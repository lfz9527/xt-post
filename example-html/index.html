<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>xt-post CDN Test</title>
  </head>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
    }
  </style>
  <body>
    <h1>xt-post CDN 测试</h1>

    <!-- 本地“模拟 CDN” -->

    <button id="callParent">调用父方法</button>
    <button id="sendEventToParent">发送事件给父方法</button>
  </body>

  <script src="../lib/xt-post.min.js"></script>
  <script>
    const xtPost = new XtPost({
      debug: true,
      id: "children-1",
      iframeId: "iframe-1",
    });

    document
      .getElementById("callParent")
      .addEventListener("click", async () => {
        const parentTitle = await xtPost.call("getParentTitle");
        console.log("父标题:", parentTitle);
      });

    document
      .getElementById("sendEventToParent")
      .addEventListener("click", async () => {
        xtPost.emit("eventFromChild", "这是子元素发送的事件");
      });

    xtPost.on("eventFromParent", (data) => {
      console.log("父元素发送的事件:", data);
    });
  </script>
</html>
